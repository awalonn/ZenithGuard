import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("tab-title"),o=document.getElementById("log-body"),b=document.getElementById("filter-input"),g=document.querySelectorAll(".filter-buttons button"),f=document.getElementById("clear-log-btn");let c,d="all",u="",m=[];async function h(){const s=new URLSearchParams(window.location.search).get("tabId");if(!s){i.textContent="Invalid Tab ID";return}c=parseInt(s);try{const e=await chrome.tabs.get(c);i.textContent=e.title||e.url||"Unknown Tab"}catch{i.textContent="Tab Closed"}const t=await chrome.runtime.sendMessage({type:"GET_NETWORK_LOG",tabId:c});Array.isArray(t)&&(m=t),l()}function l(){o.innerHTML="";const a=m.filter(t=>{const e=d==="all"||t.status===d,r=!u||t.url.toLowerCase().includes(u);return e&&r}).sort((t,e)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());if(a.length===0){o.innerHTML='<tr><td colspan="7" style="text-align: center; padding: 20px; color: #9ca3af;">No requests to display.</td></tr>';return}const s=document.createDocumentFragment();a.forEach(t=>{const e=document.createElement("tr"),r=t.status==="blocked"?"blocked":"allowed",w=new Date(t.timestamp).toLocaleTimeString();let p="Unknown";try{p=new URL(t.url).hostname}catch{}const L=t.status==="allowed"?`<button class="block-btn" data-domain="${n(p)}">Block</button>`:"",T=t.matchedRuleInfo?`<span class="source-badge">${n(t.matchedRuleInfo.source)}</span>`:"";e.innerHTML=`
                <td class="time">${w}</td>
                <td class="status"><span class="status-badge ${r}">${t.status.toUpperCase()}</span></td>
                <td class="url" title="${n(t.url)}">${n(t.url)}</td>
                <td class="source">${T}</td>
                <td class="type">${n(t.type)}</td>
                <td class="initiator" title="${n(t.initiator||"")}">${n(t.initiator||"N/A")}</td>
                <td class="actions">${L}</td>
            `,s.appendChild(e)}),o.appendChild(s)}b.addEventListener("input",a=>{u=a.target.value.toLowerCase(),l()}),g.forEach(a=>{a.addEventListener("click",()=>{const s=a;d=s.dataset.filter||"all",g.forEach(t=>t.classList.remove("active")),s.classList.add("active"),l()})}),f.addEventListener("click",async()=>{await chrome.runtime.sendMessage({type:"CLEAR_NETWORK_LOG",tabId:c}),m=[],l()}),o.addEventListener("click",async a=>{const t=a.target.closest(".block-btn");if(t&&!t.disabled){const e=t.dataset.domain;if(!e)return;t.textContent="Blocking...",t.disabled=!0,(await chrome.runtime.sendMessage({type:"ADD_TO_NETWORK_BLOCKLIST",domain:e})).success?(t.textContent="Blocked!",window.ZenithGuardToastUtils&&window.ZenithGuardToastUtils.showToast({message:`Domain ${e} blocked. Reload the page to see the full effect.`})):(t.textContent="Error",window.ZenithGuardToastUtils&&window.ZenithGuardToastUtils.showToast({message:`Failed to block ${e}.`,type:"error"}))}});function n(a){return a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}h()});
