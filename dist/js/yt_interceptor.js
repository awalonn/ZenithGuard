(()=>{if(window.zenithGuardInterceptor)return;window.zenithGuardInterceptor=!0;const r="ZenithGuard Interceptor:";function i(e){let t=!1;const n=["playerAds","adPlacements","adSlots","adBreakHeartbeatParams"];for(const s of n)e&&Array.isArray(e[s])&&e[s].length>0?(console.log(`${r} Stripping '${s}' from player response.`),e[s]=[],t=!0):e&&e[s]&&(console.log(`${r} Nullifying '${s}' from player response.`),e[s]=null,t=!0);return t}const a=window.fetch;window.fetch=async(...e)=>{const t=e[0]instanceof Request?e[0].url:e[0];if(typeof t=="string"&&t.includes("/youtubei/v1/player")){const n=await a(...e),s=n.clone();try{const o=await s.json();if(i(o)){const c=new Blob([JSON.stringify(o)],{type:"application/json"});return new Response(c,{status:n.status,statusText:n.statusText,headers:n.headers})}}catch{}return n}return a(...e)};const p=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...e){this._zgUrl=e[1],p.apply(this,e)};const l=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(...e){this.addEventListener("load",function(){if(this._zgUrl&&this._zgUrl.includes("/youtubei/v1/player")&&this.responseText)try{const t=JSON.parse(this.responseText);if(i(t)){const n=JSON.stringify(t);Object.defineProperty(this,"responseText",{value:n,writable:!1}),Object.defineProperty(this,"response",{value:n,writable:!1})}}catch{}}),l.apply(this,e)}})();
